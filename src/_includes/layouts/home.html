{%- extends "layouts/base.html" -%}

{%- block content -%}
  {%- include "partials/hero-section.html" -%}
  {%- include "partials/product-section.html" -%}
  {% include "partials/product-gallery.html" %}
  <div class="about-contact-container grid">
    {%- include "partials/about-section.html" -%}
    {%- include "partials/contact-section.html" -%}
  </div>
  {{ content | safe }}
{%- endblock -%}

{%- block bodyScripts -%}
  <script>
    (function () {
      if (!'IntersectionObserver' in window) {
        return;
      }
      const elements = document.querySelectorAll('.fade-in');

      let observer = new IntersectionObserver(
        (changes, observer) => {
          let timeout = 0;

          changes.forEach(change => {
            if (change.intersectionRatio > 0) {
              timeout += 100;
              setTimeout(() => {
                change.target.setAttribute('data-state', 'visible');
              }, timeout);
            }
          });
        },
        {
          root: null,
          rootMargin: '0px',
          threshold: 0
        }
      );

      elements.forEach(element => {
        element.setAttribute('data-state', 'hidden');

        observer.observe(element);
      });
    })();
  </script>
  
  {# <script>
    const header = document.querySelector(".site-head");
    const intercept = document.querySelector(".skip-to-main");

    const observer = new IntersectionObserver(([entry]) => {
      header.toggleAttribute("data-sticky", !entry.isIntersecting);
    });

    observer.observe(intercept);
  </script> #}

  {# <script src="/scripts/details-utils.js" defer async></script> #}
  <script src="/scripts/toggle-disclosure.js" defer async></script>
  {# <script src="/scripts/set-height.js" defer async></script> #}

{%- endblock -%}
